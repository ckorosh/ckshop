<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CK Shop - ck store</title>
  <style>
    /* تعریف متغیرهای RGB برای انیمیشن */
    :root {
      --rgb-primary: 59, 130, 246;
      --rgb-secondary: 139, 92, 246;
      --rgb-accent: 239, 68, 68;
      --rgb-success: 16, 185, 129;
      --rgb-warning: 245, 158, 11;
      --rgb-info: 6, 182, 212;
    }
    
    body {
      font-family: Tahoma;
      direction: rtl;
      margin: 0;
      padding: 0;
      background-color: #0e1013;
      color: #fff;
      transition: all 0.3s ease;
      overflow-x: hidden;
    }
    
    /* تم پیش‌فرض */
    :root {
      --primary-color: #3b82f6;
      --primary-dark: #1f2937;
      --primary-darker: #111827;
      --primary-light: #374151;
      --primary-lighter: #4b5563;
      --accent-color: #3b82f6;
      --text-color: #fff;
      --text-light: #d1d5db;
      --error-color: #ef4444;
      --success-color: #10b981;
    }
    
    /* تم سبز */
    .theme-green {
      --primary-color: #10b981;
      --primary-dark: #064e3b;
      --primary-darker: #022c22;
      --primary-light: #047857;
      --primary-lighter: #059669;
      --accent-color: #10b981;
    }
    
    /* تم آبی */
    .theme-blue {
      --primary-color: #3b82f6;
      --primary-dark: #1e40af;
      --primary-darker: #1e3a8a;
      --primary-light: #2563eb;
      --primary-lighter: #1d4ed8;
      --accent-color: #3b82f6;
    }
    
    /* تم قرمز */
    .theme-red {
      --primary-color: #ef4444;
      --primary-dark: #7f1d1d;
      --primary-darker: #450a0a;
      --primary-light: #dc2626;
      --primary-lighter: #b91c1c;
      --accent-color: #ef4444;
    }
    
    /* تم بنفش */
    .theme-purple {
      --primary-color: #8b5cf6;
      --primary-dark: #5b21b6;
      --primary-darker: #4c1d95;
      --primary-light: #7c3aed;
      --primary-lighter: #6d28d9;
      --accent-color: #8b5cf6;
    }
    
    /* تم مشکی */
    .theme-dark {
      --primary-color: #4b5563;
      --primary-dark: #111827;
      --primary-darker: #000000;
      --primary-light: #1f2937;
      --primary-lighter: #374151;
      --accent-color: #4b5563;
    }
    
    /* تم سورمه‌ای */
    .theme-indigo {
      --primary-color: #6366f1;
      --primary-dark: #3730a3;
      --primary-darker: #312e81;
      --primary-light: #4f46e5;
      --primary-lighter: #4338ca;
      --accent-color: #6366f1;
    }

    /* افکت RGB پشت زمینه */
    .rgb-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0.1;
      background: linear-gradient(45deg, 
        rgba(var(--rgb-primary), 0.5), 
        rgba(var(--rgb-secondary), 0.5), 
        rgba(var(--rgb-accent), 0.5));
      background-size: 400% 400%;
      animation: rgbBackground 15s ease infinite;
    }

    header {
      background-color: var(--primary-dark);
      padding: 20px;
      text-align: center;
      position: relative;
      z-index: 10;
      border-bottom: 2px solid;
      border-image: linear-gradient(90deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1), 
        rgba(var(--rgb-accent), 1)) 1;
      animation: headerGlow 3s infinite alternate;
    }
    
    @keyframes headerGlow {
      0% {
        box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.5);
      }
      50% {
        box-shadow: 0 0 20px rgba(var(--rgb-secondary), 0.7);
      }
      100% {
        box-shadow: 0 0 15px rgba(var(--rgb-accent), 0.6);
      }
    }
    
    header input {
      width: 40%;
      padding: 10px;
      border: none;
      border-radius: 5px;
      margin-top: 10px;
      background-color: var(--primary-light);
      color: var(--text-color);
      transition: all 0.3s ease;
    }
    
    header input:focus {
      outline: none;
      box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.8);
    }
    
    #cart {
      position: absolute;
      left: 20px;
      top: 20px;
      background: var(--primary-light);
      color: var(--text-color);
      padding: 10px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
      animation: pulse 2s infinite;
    }
    
    #auth-btn {
      position: absolute;
      left: 150px;
      top: 20px;
      background: var(--primary-light);
      color: var(--text-color);
      padding: 10px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    #auth-btn:hover {
      background: linear-gradient(90deg, 
        rgba(var(--rgb-primary), 0.8), 
        rgba(var(--rgb-secondary), 0.8));
      transform: translateY(-2px);
    }
    
    #user-info {
      position: absolute;
      left: 150px;
      top: 20px;
      background: var(--primary-light);
      color: var(--text-color);
      padding: 10px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      display: none;
    }
    
    /* استایل‌های جدید برای ناوبری و دکمه‌ها */
    nav {
      background-color: var(--primary-darker);
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      padding: 15px;
      text-align: center;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 10;
    }
    
    nav button {
      padding: 10px;
      border: none;
      border-radius: 8px;
      background-color: var(--primary-light);
      color: var(--text-color);
      cursor: pointer;
      font-weight: bold;
      position: relative;
      margin: 0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-width: 44px;
      min-height: 44px;
      transition: all 0.3s ease;
      overflow: hidden;
    }
    
    nav button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.2), 
        transparent);
      transition: all 0.5s ease;
    }
    
    nav button:hover::before {
      left: 100%;
    }
    
    nav button:hover {
      background-color: var(--primary-lighter);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    nav button img {
      width: 24px;
      height: 24px;
      object-fit: contain;
      transition: all 0.3s ease;
    }
    
    nav button:hover img {
      transform: scale(1.2) rotate(5deg);
    }
    
    nav button span {
      display: none;
    }
    
    section {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 30px;
      position: relative;
      z-index: 5;
    }
    
    .product {
      background-color: var(--primary-dark);
      border: 1px solid var(--primary-light);
      border-radius: 8px;
      width: 250px;
      margin: 15px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      position: relative;
      transition: all 0.3s ease;
      overflow: hidden;
    }
    
    .product::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, 
        rgba(var(--rgb-primary), 0.1), 
        rgba(var(--rgb-secondary), 0.1), 
        rgba(var(--rgb-accent), 0.1));
      transform: rotate(45deg);
      z-index: -1;
      animation: productShine 3s infinite linear;
    }
    
    .product:hover {
      transform: translateY(-10px) scale(1.02);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3), 
                  0 0 20px rgba(var(--rgb-primary), 0.4);
      border-color: rgba(var(--rgb-primary), 0.5);
    }
    
    .product img {
      width: 100%;
      height: 150px;
      object-fit: contain;
      margin-bottom: 10px;
      transition: all 0.5s ease;
    }
    
    .product:hover img {
      transform: scale(1.1) rotate(2deg);
      filter: drop-shadow(0 0 8px rgba(var(--rgb-primary), 0.7));
    }
    
    .product h3 {
      font-size: 16px;
      margin: 10px 0;
      transition: all 0.3s ease;
    }
    
    .product:hover h3 {
      color: rgba(var(--rgb-primary), 1);
    }
    
    .product p {
      color: var(--text-light);
      margin-bottom: 10px;
    }
    
    .product button {
      background-color: var(--accent-color);
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .product button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
      transition: all 0.5s ease;
    }
    
    .product button:hover::before {
      left: 100%;
    }
    
    .product button:hover {
      background: linear-gradient(90deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1));
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    footer {
      background-color: var(--primary-darker);
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 30px;
      position: relative;
      z-index: 10;
      border-top: 2px solid;
      border-image: linear-gradient(90deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1), 
        rgba(var(--rgb-accent), 1)) 1;
    }
    
    .social-icons {
      margin-top: 15px;
    }
    
    .social-icons a {
      margin: 0 10px;
      display: inline-block;
      transition: all 0.3s ease;
    }
    
    .social-icons a:hover {
      transform: translateY(-5px);
    }
    
    .social-icons img {
      width: 24px;
      height: 24px;
      vertical-align: middle;
      transition: transform 0.3s;
    }
    
    .social-icons img:hover {
      transform: scale(1.5) rotate(10deg);
      filter: drop-shadow(0 0 8px rgba(var(--rgb-primary), 0.8));
    }
    
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
    }
    
    .modal-content {
      background-color: var(--primary-dark);
      margin: 5% auto;
      padding: 20px;
      border-radius: 8px;
      width: 50%;
      position: relative;
      border: 2px solid;
      border-image: linear-gradient(45deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1)) 1;
      box-shadow: 0 0 30px rgba(var(--rgb-primary), 0.5);
      animation: modalAppear 0.5s ease;
    }
    
    .close {
      position: absolute;
      left: 15px;
      top: 10px;
      color: #aaa;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .close:hover {
      color: white;
      transform: rotate(90deg);
    }
    
    #auth-form input, #payment-form input, #payment-form select {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: none;
      border-radius: 5px;
      background-color: var(--primary-light);
      color: var(--text-color);
      transition: all 0.3s ease;
    }
    
    #auth-form input:focus, #payment-form input:focus, #payment-form select:focus {
      outline: none;
      box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.5);
    }
    
    #auth-form button, #payment-form button {
      width: 100%;
      padding: 10px;
      background-color: var(--accent-color);
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    #auth-form button:hover, #payment-form button:hover {
      background: linear-gradient(90deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1));
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    .error-message {
      color: var(--error-color);
      font-size: 14px;
      margin-top: 5px;
      animation: shake 0.5s ease;
    }
    
    .success-message {
      color: var(--success-color);
      font-size: 14px;
      margin-top: 5px;
      animation: fadeIn 0.5s ease;
    }
    
    /* استایل انتخابگر تم */
    #theme-selector {
      position: absolute;
      right: 20px;
      top: 20px;
      background: var(--primary-light);
      color: var(--text-color);
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 14px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      cursor: pointer;
      border: none;
      transition: all 0.3s ease;
    }
    
    #theme-selector:hover {
      box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.5);
    }
    
    #theme-selector option {
      background: var(--primary-dark);
      color: var(--text-color);
    }
    
    /* استایل برچسب NEW */
    .new-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(45deg, 
        rgba(var(--rgb-primary), 1), 
        rgba(var(--rgb-secondary), 1));
      color: white;
      padding: 4px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      animation: pulse 1.5s infinite, rgbText 3s infinite;
      z-index: 10;
    }
    
    /* استایل انیمیشن بازی‌ها */
    .game-item {
      animation: shake 0.8s infinite alternate, rgbBorder 5s infinite;
    }
    
    /* انیمیشن‌های جدید */
    @keyframes rgbBackground {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }
    
    @keyframes rgbText {
      0% {
        color: rgba(var(--rgb-primary), 1);
      }
      33% {
        color: rgba(var(--rgb-secondary), 1);
      }
      66% {
        color: rgba(var(--rgb-accent), 1);
      }
      100% {
        color: rgba(var(--rgb-primary), 1);
      }
    }
    
    @keyframes rgbBorder {
      0% {
        box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.7);
      }
      33% {
        box-shadow: 0 0 15px rgba(var(--rgb-secondary), 0.7);
      }
      66% {
        box-shadow: 0 0 12px rgba(var(--rgb-accent), 0.7);
      }
      100% {
        box-shadow: 0 0 10px rgba(var(--rgb-primary), 0.7);
      }
    }
    
    @keyframes productShine {
      0% {
        transform: rotate(45deg) translateY(-100%);
      }
      100% {
        transform: rotate(45deg) translateY(100%);
      }
    }
    
    @keyframes modalAppear {
      0% {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    @keyframes fadeIn {
      0% {
        opacity: 0;
      }
      100% {
        opacity: 1;
      }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.9; }
      100% { transform: scale(1); opacity: 1; }
    }
    
    @keyframes shake {
      0% { transform: rotate(-2deg); }
      25% { transform: rotate(2deg); }
      50% { transform: rotate(-2deg); }
      75% { transform: rotate(2deg); }
      100% { transform: rotate(-2deg); }
    }
    
    /* ذرات شناور RGB */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .particle {
      position: absolute;
      border-radius: 50%;
      opacity: 0.5;
      animation: floatParticle 15s infinite linear;
    }
    
    @keyframes floatParticle {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.5;
      }
      90% {
        opacity: 0.3;
      }
      100% {
        transform: translateY(-100vh) translateX(100vw) rotate(360deg);
        opacity: 0;
      }
    }
    
    @media (max-width: 768px) {
      header input {
        width: 70%;
      }
      #cart, #auth-btn, #user-info, #theme-selector {
        position: static;
        display: block;
        margin: 10px auto;
        width: 80%;
        text-align: center;
      }
      .modal-content {
        width: 90%;
      }
      .product {
        width: 100%;
        margin: 10px 0;
      }
      
      /* استایل‌های موبایل برای ناوبری */
      nav {
        padding: 10px;
        justify-content: flex-start;
        overflow-x: auto;
        white-space: nowrap;
        flex-wrap: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      
      nav button {
        padding: 10px;
        font-size: 0;
        min-width: 44px;
        min-height: 44px;
      }
      
      nav button img {
        width: 20px;
        height: 20px;
      }
    }
    
    @media (max-width: 480px) {
      header h1 {
        font-size: 20px;
      }
      header p {
        font-size: 14px;
      }
    }
    
    /* توضیح برای کاربر */
    .filter-info {
      text-align: center;
      padding: 10px;
      background: var(--primary-light);
      margin: 10px auto;
      border-radius: 5px;
      max-width: 500px;
      display: none;
      animation: pulse 2s infinite;
    }
  </style>
</head>
<body>
  <!-- ذرات شناور RGB -->
  <div class="particles" id="particles"></div>
  
  <!-- افکت پس‌زمینه RGB -->
  <div class="rgb-background"></div>

  <header>
    <img src="https://cdn.iconscout.com/icon/free/png-256/free-calvin-klein-logo-icon-svg-png-download-2853830.png" alt="CK Logo" style="width: 115px; height: 100px; margin-left: 10px; border-radius: 8px;">
    <div style="display: flex; align-items: center; justify-content: center;">
      <div>
        <p>trust to ck company - فروش تخصصی اشتراک‌های دیجیتال و بازی‌ها</p>
      </div>
    </div>
    <input type="text" id="search" placeholder="جستجو در محصولات...">
    
    <select id="theme-selector" onchange="changeTheme(this.value)">
      <option value="default">تم پیش‌فرض</option>
      <option value="green">تم سبز</option>
      <option value="blue">تم آبی</option>
      <option value="red">تم قرمز</option>
      <option value="purple">تم بنفش</option>
      <option value="dark">تم مشکی</option>
      <option value="indigo">تم سورمه‌ای</option>
    </select>
    
    <div id="auth-btn" onclick="showAuthModal()">ورود / عضویت</div>
    <div id="user-info">
      <span id="username-display"></span>
      <button onclick="logout()" style="margin-right: 10px; background: var(--error-color); color: white; border: none; padding: 3px 8px; border-radius: 5px; cursor: pointer; font-size: 12px;">خروج</button>
    </div>
    <div id="cart">
      سبد خرید: <span id="cart-count">۰</span> مورد - مجموع: <span id="cart-total">۰</span> تومان
      <button onclick="checkout()" style="margin-right: 10px; background: var(--accent-color); color: white; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer;">پرداخت</button>
    </div>
  </header>

  <div class="filter-info" id="filter-info">
    برای مشاهده نام فیلترها، روی آیکون‌ها نگه دارید یا کلیک کنید
  </div>

  <nav>
    <button onclick="filterCategory('همه')" title="همه محصولات"><img src="https://cdn-icons-png.flaticon.com/512/60/60992.png" alt="All"><span>همه</span></button>
    <button onclick="filterCategory('Xbox')" title="Xbox Game Pass"><img src="https://upload.wikimedia.org/wikipedia/commons/f/f9/Xbox_one_logo.svg" alt="Xbox"><span>Xbox</span></button>
    <button onclick="filterCategory('PlayStation')" title="PlayStation Plus"><img src="https://upload.wikimedia.org/wikipedia/commons/0/00/PlayStation_logo.svg" alt="PlayStation"><span>PS Plus</span></button>
    <button onclick="filterCategory('Netflix')" title="Netflix"><img src="https://upload.wikimedia.org/wikipedia/commons/7/75/Netflix_icon.svg" alt="Netflix"><span>Netflix</span></button>
    <button onclick="filterCategory('Spotify')" title="Spotify"><img src="https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg" alt="Spotify"><span>Spotify</span></button>
    <button onclick="filterCategory('Apple')" title="Apple Music"><img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple"><span>Apple</span></button>
    <button onclick="filterCategory('EA')" title="EA Play"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Electronic-Arts-Logo.svg/960px-Electronic-Arts-Logo.svg.png" alt="EA"><span>EA Play</span></button>
    <button onclick="filterCategory('Telegram')" title="Telegram Premium"><img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram"><span>Telegram</span></button>
    <button onclick="filterCategory('بازی')" title="بازی‌ها"><img src="https://cdn-icons-png.flaticon.com/512/686/686589.png" alt="Games"><span>بازی‌ها</span></button>
  </nav>

  <div id="auth-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>ورود / عضویت</h2>
      <form id="auth-form">
        <div id="login-fields">
          <input type="text" id="login-username" placeholder="نام کاربری یا ایمیل" required>
          <input type="password" id="login-password" placeholder="رمز عبور" required>
          <div id="login-error" class="error-message"></div>
          <button type="button" onclick="login()">ورود</button>
          <p>کاربر جدید هستید؟ <a href="#" id="show-register">ثبت نام کنید</a></p>
        </div>
        <div id="register-fields" style="display:none">
          <input type="text" id="register-fullname" placeholder="نام کامل" required>
          <input type="email" id="register-email" placeholder="ایمیل" required>
          <input type="text" id="register-username" placeholder="نام کاربری" required>
          <input type="password" id="register-password" placeholder="رمز عبور" required>
          <input type="password" id="register-confirm" placeholder="تکرار رمز عبور" required>
          <div id="register-error" class="error-message"></div>
          <div id="register-success" class="success-message"></div>
          <button type="button" onclick="register()">ثبت نام</button>
          <p>قبلا ثبت نام کرده‌اید؟ <a href="#" id="show-login">ورود</a></p>
        </div>
      </form>
    </div>
  </div>

  <section id="products"></section>

  <footer>
    <p>تمامی حقوق محفوظ است &copy; 2025 - CK Shop</p>
    <div class="social-icons">
      <a href="https://t.me/ckoori" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg" alt="Telegram">
      </a>
      <a href="https://www.instagram.com/ckooroshi?igsh=d3dmeTAybThiYnV3" target="_blank">
        <img src="https://upload.wikimedia.org/wikipedia/commons/e/e7/Instagram_logo_2016.svg" alt="Instagram">
      </a>
    </div>
  </footer>

  <script>
    // داده‌های محصولات
    const products = [
      // محصولات تلگرام
      { name: 'Telegram Premium - 1 ماهه', price: 120000, category: 'Telegram' },
      { name: 'Telegram Premium - 3 ماهه', price: 320000, category: 'Telegram' },
      { name: 'Telegram Premium - 6 ماهه', price: 600000, category: 'Telegram' },
      { name: 'Telegram Premium - 12 ماهه', price: 1100000, category: 'Telegram' },
      
      // بقیه محصولات
      { name: 'Game Pass Ultimate - 1 ماهه', price: 220000, category: 'Xbox' },
      { name: 'Game Pass Ultimate - 3 ماهه', price: 580000, category: 'Xbox' },
      { name: 'Game Pass Ultimate - 6 ماهه', price: 1100000, category: 'Xbox' },
      { name: 'Game Pass Ultimate - 12 ماهه', price: 2000000, category: 'Xbox' },
      { name: 'Game Pass Ultimate - 2 ساله', price: 3700000, category: 'Xbox' },
      { name: 'PS Plus Deluxe - 1 ماهه', price: 180000, category: 'PlayStation' },
      { name: 'PS Plus Deluxe - 3 ماهه', price: 450000, category: 'PlayStation' },
      { name: 'PS Plus Deluxe - 6 ماهه', price: 900000, category: 'PlayStation' },
      { name: 'PS Plus Deluxe - 12 ماهه', price: 1700000, category: 'PlayStation' },
      { name: 'نتفلیکس پرمیوم - 1 ماهه', price: 215000, category: 'Netflix' },
      { name: 'Apple Music - 1 ماهه', price: 289000, category: 'Apple' },
      { name: 'Spotify Premium - 1 ماهه', price: 143000, category: 'Spotify' },
      { name: 'EA Play - 1 ماهه', price: 180000, category: 'EA' },
      { name: 'EA Play - 12 ماهه', price: 1100000, category: 'EA' },
      { name: 'FC 25', price: 2350000, category: 'بازی' },
      { name: 'Call of Duty: Modern Warfare III', price: 3200000, category: 'بازی' },
      { name: 'GTA V (نسخه کامل)', price: 2700000, category: 'بازی' },
      { name: 'Red Dead Redemption 2', price: 2500000, category: 'بازی' },
      { name: 'Fortnite V-Bucks Pack', price: 980000, category: 'بازی' },
      { name: 'Elden Ring', price: 2950000, category: 'بازی' },
      { name: 'Cyberpunk 2077', price: 2300000, category: 'بازی' },
      { name: 'God of War: Ragnarok', price: 3300000, category: 'بازی' },
      { name: 'Spider-Man 2 (PS5)', price: 3500000, category: 'بازی' },
      { name: 'Assassin\'s Creed Shadows', price: 3100000, category: 'بازی' },
      { name: 'The Crew Motorfest', price: 2800000, category: 'بازی' },
      { name: 'Need for Speed Heat', price: 1900000, category: 'بازی' },
      { name: 'Gotham Knights', price: 2400000, category: 'بازی' }
    ];

    const productImages = {
      "Telegram": "https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg",
      "Xbox": "https://assets.xboxservices.com/assets/dd/a1/dda1aa1d-99f2-470b-9773-710eabf849e0.jpg",
      "PlayStation": "https://image.api.playstation.com/vulcan/ap/rnd/202204/0810/803Pm8uJoZ2Cl9fJPvTaXHqG.png",
      "Netflix": "https://upload.wikimedia.org/wikipedia/commons/7/75/Netflix_icon.svg",
      "Apple": "https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg",
      "Spotify": "https://upload.wikimedia.org/wikipedia/commons/1/19/Spotify_logo_without_text.svg",
      "EA": "https://media.contentapi.ea.com/content/dam/eacom/images/2020/06/ea-featured-image-ea-play.jpg.adapt.crop191x100.1200w.jpg",
      "FC 25": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQPMi1lcaxCdbtCyZAyxqYr9DTwRVYJTkhAag&s",
      "Call of Duty: Modern Warfare III": "https://store-images.s-microsoft.com/image/apps.55183.14623575291286193.52ecceb7-ac9f-47e8-a29f-30ab63f33131.048bddb8-7ab3-4ba2-85b8-6acb95ee03b5",
      "GTA V (نسخه کامل)": "https://upload.wikimedia.org/wikipedia/en/a/a5/Grand_Theft_Auto_V.png",
      "Red Dead Redemption 2": "https://upload.wikimedia.org/wikipedia/en/4/44/Red_Dead_Redemption_II.jpg",
      "Fortnite V-Bucks Pack": "https://m.media-amazon.com/images/M/MV5BMTZlMmIxM2EtN2Y4Zi00M2ZhLTk3NzgtNjJmZTU0MTQ3YjcwXkEyXkFqcGc@._V1_FMjpg_UX1000_.jpg",
      "Elden Ring": "https://upload.wikimedia.org/wikipedia/en/b/b9/Elden_Ring_Box_art.jpg",
      "Cyberpunk 2077": "https://upload.wikimedia.org/wikipedia/en/9/9f/Cyberpunk_2077_box_art.jpg",
      "God of War: Ragnarok": "https://upload.wikimedia.org/wikipedia/en/e/ee/God_of_War_Ragnar%C3%B6k_cover.jpg",
      "Spider-Man 2 (PS5)": "https://i.etsystatic.com/35198957/r/il/39a9a9/5388247403/il_570xN.5388247403_lkuv.jpg",
      "Assassin's Creed Shadows": "https://assets-prd.ignimgs.com/2024/05/15/acshadows-1715789601294.jpg",
      "The Crew Motorfest":"https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSvy4zKFk4fH7HL2B4Z0wlhT4OpOw6mbHjNfRbxco-Nzk3R1BIsAh9WoUDhxjcwihhrCRN3",
      "Need for Speed Heat": "https://store-images.s-microsoft.com/image/apps.26776.69435230515002378.477c7a96-5d17-45ec-95c2-a2739146b68d.b0d37a76-e4fa-495e-abac-6697ee4b5887",
      "Gotham Knights": "https://cdn.myportfolio.com/104baae407c3bf6924ab16701d4f9991/f076f5f4-0a36-407d-ac41-80d92936564a_rw_1920.jpg?h=e3d15d0c00c0a209fda76177efafa55f",
    };

    // متغیرهای عمومی
    let cartCount = 0;
    let cartTotal = 0;
    let currentUser = null;

    // المنت‌های DOM
    const container = document.getElementById("products");
    const searchInput = document.getElementById("search");
    const authBtn = document.getElementById("auth-btn");
    const userInfo = document.getElementById("user-info");
    const usernameDisplay = document.getElementById("username-display");
    const themeSelector = document.getElementById("theme-selector");
    const filterInfo = document.getElementById("filter-info");

    // ایجاد ذرات شناور RGB
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const colors = [
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-primary')}, 0.7)`,
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-secondary')}, 0.7)`,
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-accent')}, 0.7)`,
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-success')}, 0.7)`,
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-warning')}, 0.7)`,
        `rgba(${getComputedStyle(document.documentElement).getPropertyValue('--rgb-info')}, 0.7)`
      ];
      
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // اندازه تصادفی
        const size = Math.random() * 15 + 5;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // موقعیت تصادفی
        particle.style.left = `${Math.random() * 100}vw`;
        particle.style.top = `${Math.random() * 100}vh`;
        
        // رنگ تصادفی
        particle.style.background = colors[Math.floor(Math.random() * colors.length)];
        
        // مدت زمان انیمیشن تصادفی
        particle.style.animationDuration = `${Math.random() * 20 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        
        particlesContainer.appendChild(particle);
      }
    }

    // تغییر تم
    function changeTheme(theme) {
      // حذف تمام کلاس‌های تم از body
      document.body.classList.remove(
        'theme-green', 'theme-blue', 'theme-red', 
        'theme-purple', 'theme-dark', 'theme-indigo'
      );
      
      // اضافه کردن تم انتخاب شده
      if (theme !== 'default') {
        document.body.classList.add(`theme-${theme}`);
      }
      
      // ذخیره تم انتخاب شده
      localStorage.setItem('ckShopTheme', theme);
      
      // به روز رسانی ذرات برای تم جدید
      document.getElementById('particles').innerHTML = '';
      createParticles();
    }

    // بارگذاری تم ذخیره شده
    function loadTheme() {
      const savedTheme = localStorage.getItem('ckShopTheme') || 'default';
      themeSelector.value = savedTheme;
      changeTheme(savedTheme);
    }

    // سیستم کاربران
    function getUsers() {
      return JSON.parse(localStorage.getItem('ckShopUsers')) || [];
    }

    function saveUsers(users) {
      localStorage.setItem('ckShopUsers', JSON.stringify(users));
    }

    function getCurrentUser() {
      return JSON.parse(localStorage.getItem('ckShopCurrentUser'));
    }

    function setCurrentUser(user) {
      localStorage.setItem('ckShopCurrentUser', JSON.stringify(user));
    }

    function clearCurrentUser() {
      localStorage.removeItem('ckShopCurrentUser');
    }

    // ثبت نام کاربر جدید
    function register() {
      const fullname = document.getElementById("register-fullname").value.trim();
      const email = document.getElementById("register-email").value.trim();
      const username = document.getElementById("register-username").value.trim();
      const password = document.getElementById("register-password").value;
      const confirm = document.getElementById("register-confirm").value;
      
      const errorElement = document.getElementById("register-error");
      const successElement = document.getElementById("register-success");
      
      errorElement.textContent = "";
      successElement.textContent = "";
      
      // اعتبارسنجی
      if (!fullname || !email || !username || !password || !confirm) {
        errorElement.textContent = "لطفا تمام فیلدها را پر کنید";
        return;
      }
      if (password !== confirm) {
        errorElement.textContent = "رمز عبور و تکرار آن مطابقت ندارند";
        return;
      }
      
      if (password.length < 6) {
        errorElement.textContent = "رمز عبور باید حداقل ۶ کاراکتر باشد";
        return;
      }
      
      const users = getUsers();
      
      // بررسی تکراری نبودن نام کاربری و ایمیل
      if (users.some(u => u.username === username)) {
        errorElement.textContent = "این نام کاربری قبلا ثبت شده است";
        return;
      }
      
      if (users.some(u => u.email === email)) {
        errorElement.textContent = "این ایمیل قبلا ثبت شده است";
        return;
      }
      
      // ثبت کاربر جدید
      const newUser = {
        id: Date.now(),
        fullname,
        email,
        username,
        password,
        joinDate: new Date().toISOString()
      };
      
      users.push(newUser);
      saveUsers(users);
      
      successElement.textContent = "ثبت نام با موفقیت انجام شد! اکنون می‌توانید وارد شوید";
      
      // نمایش فرم ورود
      document.getElementById('register-fields').style.display = 'none';
      document.getElementById('login-fields').style.display = 'block';
    }

    // ورود کاربر
    function login() {
      const username = document.getElementById("login-username").value.trim();
      const password = document.getElementById("login-password").value;
      
      const errorElement = document.getElementById("login-error");
      errorElement.textContent = "";
      
      if (!username || !password) {
        errorElement.textContent = "لطفا نام کاربری و رمز عبور را وارد کنید";
        return;
      }
      
      const users = getUsers();
      const user = users.find(u => (u.username === username || u.email === username) && u.password === password);
      
      if (!user) {
        errorElement.textContent = "نام کاربری یا رمز عبور اشتباه است";
        return;
      }
      
      // ذخیره کاربر فعلی
      setCurrentUser(user);
      currentUser = user;
      
      // به‌روزرسانی UI
      updateUserUI();
      closeAuthModal();
    }

    // خروج کاربر
    function logout() {
      clearCurrentUser();
      currentUser = null;
      updateUserUI();
    }

    // به‌روزرسانی نمایش وضعیت کاربر
    function updateUserUI() {
      const user = getCurrentUser();
      
      if (user) {
        authBtn.style.display = 'none';
        userInfo.style.display = 'block';
        usernameDisplay.textContent = `خوش آمدید ${user.fullname}`;
      } else {
        authBtn.style.display = 'block';
        userInfo.style.display = 'none';
      }
    }

    // مدیریت محصولات و سبد خرید
    function renderProducts(list) {
      container.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement("div");
        card.className = "product";
        
        if (p.category === 'بازی') {
          card.classList.add('game-item');
        }
        
        // اضافه کردن افکت NEW برای محصولات جدید
        if (Math.random() > 0.7) {
          const newBadge = document.createElement('div');
          newBadge.className = 'new-badge';
          newBadge.textContent = 'NEW';
          card.appendChild(newBadge);
        }
        
        const img = productImages[p.name] || productImages[p.category] || '';
        
        card.innerHTML = `
          <img src="${img}" alt="logo">
          <h3>${p.name}</h3>
          <p>${p.price.toLocaleString()} تومان</p>
          <button onclick="addToCart('${p.name}', ${p.price})">افزودن به سبد</button>
        `;
        
        container.appendChild(card);
      });
    }

    function addToCart(name, price) {
      if (!currentUser) {
        alert('لطفا ابتدا وارد حساب کاربری خود شوید');
        showAuthModal();
        return;
      }
      
      cartCount++;
      cartTotal += price;
      document.getElementById("cart-count").textContent = cartCount;
      document.getElementById("cart-total").textContent = cartTotal.toLocaleString();
      
      // افکت انیمیشن برای سبد خرید
      const cart = document.getElementById("cart");
      cart.style.transform = "scale(1.1)";
      setTimeout(() => {
        cart.style.transform = "scale(1)";
      }, 300);
    }

    function filterCategory(category) {
      if (category === 'همه') {
        renderProducts(products);
      } else {
        const filtered = products.filter(p => p.category === category);
        renderProducts(filtered);
      }
      
      // نمایش پیام راهنما
      filterInfo.style.display = 'block';
      setTimeout(() => {
        filterInfo.style.display = 'none';
      }, 3000);
    }

    function checkout() {
      if (!currentUser) {
        alert('لطفا ابتدا وارد حساب کاربری خود شوید');
        showAuthModal();
        return;
      }
      
      if (cartCount === 0) {
        alert('سبد خرید شما خالی است!');
        return;
      }
      
      const modal = document.createElement('div');
      modal.className = 'modal';
      modal.innerHTML = `
        <div class="modal-content" style="max-width: 500px;">
          <span class="close" onclick="document.body.removeChild(this.parentElement.parentElement)">&times;</span>
          <h2>تکمیل خرید</h2>
          <p>مجموع خرید: ${cartTotal.toLocaleString()} تومان</p>
          <form id="payment-form">
            <input type="text" placeholder="نام کامل" value="${currentUser.fullname}" required>
            <input type="tel" placeholder="شماره همراه" required>
            <select required>
              <option value="">روش پرداخت را انتخاب کنید</option>
              <option value="zarinpal">زرین پال</option>
              <option value="idpay">آیدی پی</option>
              <option value="card">کارت به کارت</option>
            </select>
            <button type="submit">پرداخت</button>
          </form>
        </div>
      `;
      
      document.body.appendChild(modal);
      document.getElementById('payment-form').addEventListener('submit', function(e) {
        e.preventDefault();
        alert('پرداخت با موفقیت انجام شد! سفارش شما ثبت گردید.');
        cartCount = 0;
        cartTotal = 0;
        document.getElementById("cart-count").textContent = '۰';
        document.getElementById("cart-total").textContent = '۰';
        document.body.removeChild(modal);
      });
    }

    // مدیریت مودال عضویت/ورود
    function showAuthModal() {
      document.getElementById('auth-modal').style.display = 'block';
    }

    function closeAuthModal() {
      document.getElementById('auth-modal').style.display = 'none';
    }

    // رویدادهای صفحه
    document.addEventListener('DOMContentLoaded', function() {
      // ایجاد ذرات شناور
      createParticles();
      
      // بارگذاری تم ذخیره شده
      loadTheme();
      
      // بررسی کاربر لاگین کرده
      currentUser = getCurrentUser();
      updateUserUI();
      
      // رویدادهای مودال عضویت/ورود
      document.querySelector('.close').onclick = closeAuthModal;
      document.getElementById('show-register').onclick = function(e) {
        e.preventDefault();
        document.getElementById('login-fields').style.display = 'none';
        document.getElementById('register-fields').style.display = 'block';
      };
      document.getElementById('show-login').onclick = function(e) {
        e.preventDefault();
        document.getElementById('register-fields').style.display = 'none';
        document.getElementById('login-fields').style.display = 'block';
      };
      
      // بستن مودال با کلیک خارج از آن
      window.onclick = function(event) {
        const modal = document.getElementById('auth-modal');
        if (event.target == modal) {
          modal.style.display = 'none';
        }
      };
      
      // نمایش راهنما برای فیلترها در موبایل
      if (window.innerWidth <= 768) {
        filterInfo.style.display = 'block';
        setTimeout(() => {
          filterInfo.style.display = 'none';
        }, 5000);
      }
    });

    // جستجوی محصولات
    searchInput.addEventListener("input", () => {
      const value = searchInput.value.trim();
      const filtered = products.filter(p => p.name.includes(value));
      renderProducts(filtered);
    });

    // نمایش اولیه محصولات
    renderProducts(products);
  </script>
</body>
</html>
